{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to MkDocs For full documentation visit mkdocs.org . Commands mkdocs new [dir-name] - Create a new project. mkdocs serve - Start the live-reloading docs server. mkdocs build - Build the documentation site. mkdocs -h - Print help message and exit. Project layout mkdocs.yml # The configuration file. docs/ index.md # The documentation homepage. ... # Other markdown pages, images and other files.","title":"Welcome to MkDocs"},{"location":"#welcome-to-mkdocs","text":"For full documentation visit mkdocs.org .","title":"Welcome to MkDocs"},{"location":"#commands","text":"mkdocs new [dir-name] - Create a new project. mkdocs serve - Start the live-reloading docs server. mkdocs build - Build the documentation site. mkdocs -h - Print help message and exit.","title":"Commands"},{"location":"#project-layout","text":"mkdocs.yml # The configuration file. docs/ index.md # The documentation homepage. ... # Other markdown pages, images and other files.","title":"Project layout"},{"location":"ubuntu%2020.04%20%E7%B3%BB%E7%BB%9F%E5%88%9D%E5%A7%8B%E5%8C%96/","text":"\u7f51\u7edc\u914d\u7f6e ~# cat /etc/netplan/00-installer-config.yaml # This is the network config written by 'subiquity' network: ethernets: eth0: dhcp4: no addresses: - 192.168.122.73/24 gateway4: 192.168.122.1 nameservers: addresses: [223.5.5.5, 114.114.114.114] version: 2 ~# netplan apply \u521d\u59cb\u5316ssh\u914d\u7f6e\u6587\u4ef6 sed -i '/#PermitRootLogin/a PermitRootLogin yes' /etc/ssh/sshd_config systemctl restart sshd \u5173\u95ed\u9632\u706b\u5899 sudo ufw allow 3306/tcp sudo ufw disable \u8bbe\u7f6e\u65f6\u533a # 1.\u67e5\u770b\u5f53\u524d\u65f6\u533a date -R # 2.\u4fee\u6539\u4e3a\u5317\u4eac\u65f6\u533a sudo cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime # 3. \u4f7f\u7528\u4ea4\u4e92\u65b9\u5f0f\u914d\u7f6e\u4e3aBeijing\u65f6\u533a # \u4ea4\u4e92\u5f0f\u5730\u533a\u9009\u62e9\u4e9a\u6d32 Asia\uff0c\u786e\u8ba4\u4e4b\u540e\u9009\u62e9\u4e2d\u56fd\uff08China)\uff0c\u6700\u540e\u9009\u62e9\u5317\u4eac(Beijing) sudo tzselect \u914d\u7f6e\u8f6f\u4ef6\u6e90 https://mirrors.ustc.edu.cn/repogen/ cat <<-\"EOF\" > /etc/apt/sources.list deb https://mirrors.ustc.edu.cn/ubuntu/ focal main restricted universe multiverse deb-src https://mirrors.ustc.edu.cn/ubuntu/ focal main restricted universe multiverse deb https://mirrors.ustc.edu.cn/ubuntu/ focal-security main restricted universe multiverse deb-src https://mirrors.ustc.edu.cn/ubuntu/ focal-security main restricted universe multiverse deb https://mirrors.ustc.edu.cn/ubuntu/ focal-updates main restricted universe multiverse deb-src https://mirrors.ustc.edu.cn/ubuntu/ focal-updates main restricted universe multiverse deb https://mirrors.ustc.edu.cn/ubuntu/ focal-backports main restricted universe multiverse deb-src https://mirrors.ustc.edu.cn/ubuntu/ focal-backports main restricted universe multiverse ## Not recommended # deb https://mirrors.ustc.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse # deb-src https://mirrors.ustc.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse EOF \u5b89\u88c5\u5e38\u7528\u8f6f\u4ef6\u5305 \u5220\u9664\u9ed8\u8ba4\u5b89\u88c5 apt update apt remove ufw lxd lxcfs lxc-common -y \u5b89\u88c5\u57fa\u7840\u8f6f\u4ef6\u5305 apt install bash-completion conntrack ipset ipvsadm jq libseccomp2 psmisc rsync socat net-tools vim \u4f7f\u7528 Ansible \u521d\u59cb\u5316\u673a\u5668 apt install ansible git clone https://github.com/92devops/ansible-init-os.git \u5b9a\u4e49inventory [all] 192.168.122.73 \u6267\u884c ansible-playbook -i inventory test.yml PLAY [all] *********************************************************************************************************************************************** TASK [Gathering Facts] *********************************************************************************************************************************** ok: [192.168.122.73] TASK [initsys : apt\u66f4\u65b0\u7f13\u5b58\u5237\u65b0] ******************************************************************************************************************************* ok: [192.168.122.73] TASK [initsys : \u5220\u9664ubuntu\u9ed8\u8ba4\u5b89\u88c5] **************************************************************************************************************************** changed: [192.168.122.73] => (item=ufw) changed: [192.168.122.73] => (item=lxd) changed: [192.168.122.73] => (item=lxd-client) changed: [192.168.122.73] => (item=lxcfs) changed: [192.168.122.73] => (item=lxc-common) TASK [initsys : \u5b89\u88c5 ubuntu/debian\u57fa\u7840\u8f6f\u4ef6] ******************************************************************************************************************** ok: [192.168.122.73] TASK [initsys : \u51c6\u5907 journal \u65e5\u5fd7\u76f8\u5173\u76ee\u5f55] *********************************************************************************************************************** ok: [192.168.122.73] => (item=/etc/systemd/journald.conf.d) ok: [192.168.122.73] => (item=/var/log/journal) TASK [initsys : \u4f18\u5316\u8bbe\u7f6e journal \u65e5\u5fd7] ************************************************************************************************************************* ok: [192.168.122.73] TASK [initsys : \u91cd\u542f journald \u670d\u52a1] ************************************************************************************************************************** changed: [192.168.122.73] TASK [initsys : Configuration iptables] ****************************************************************************************************************** skipping: [192.168.122.73] TASK [initsys : \u5220\u9664centos\u9ed8\u8ba4\u5b89\u88c5] **************************************************************************************************************************** skipping: [192.168.122.73] => (item=firewalld) skipping: [192.168.122.73] => (item=python-firewall) skipping: [192.168.122.73] => (item=firewalld-filesystem) TASK [initsys : \u5b89\u88c5\u57fa\u7840\u8f6f\u4ef6\u5305] ********************************************************************************************************************************* skipping: [192.168.122.73] TASK [initsys : \u4e34\u65f6\u5173\u95ed selinux] **************************************************************************************************************************** skipping: [192.168.122.73] TASK [initsys : \u6c38\u4e45\u5173\u95ed selinux] **************************************************************************************************************************** skipping: [192.168.122.73] TASK [initsys : \u7981\u6b62rsyslog\u83b7\u53d6journald\u65e5\u5fd71] ****************************************************************************************************************** skipping: [192.168.122.73] TASK [initsys : \u7981\u6b62rsyslog\u83b7\u53d6journald\u65e5\u5fd72] ****************************************************************************************************************** skipping: [192.168.122.73] TASK [initsys : \u91cd\u542frsyslog\u670d\u52a1] ***************************************************************************************************************************** skipping: [192.168.122.73] TASK [initsys : \u7981\u7528\u7cfb\u7edf swap] ******************************************************************************************************************************* changed: [192.168.122.73] TASK [initsys : \u5220\u9664fstab swap \u76f8\u5173\u914d\u7f6e] *********************************************************************************************************************** ok: [192.168.122.73] TASK [initsys : \u8f6c\u6362\u5185\u6838\u7248\u672c\u4e3a\u6d6e\u70b9\u6570] ****************************************************************************************************************************** ok: [192.168.122.73] TASK [initsys : \u52a0\u8f7d\u5185\u6838\u6a21\u5757] ********************************************************************************************************************************** ok: [192.168.122.73] => (item=br_netfilter) ok: [192.168.122.73] => (item=ip_vs) ok: [192.168.122.73] => (item=ip_vs_rr) ok: [192.168.122.73] => (item=ip_vs_wrr) ok: [192.168.122.73] => (item=ip_vs_sh) ok: [192.168.122.73] => (item=nf_conntrack) TASK [initsys : \u5c1d\u8bd5\u52a0\u8f7dnf_conntrack_ipv4] ******************************************************************************************************************* changed: [192.168.122.73] TASK [initsys : \u542f\u7528systemd\u81ea\u52a8\u52a0\u8f7d\u6a21\u5757\u670d\u52a1] *********************************************************************************************************************** ok: [192.168.122.73] TASK [initsys : \u589e\u52a0\u5185\u6838\u6a21\u5757\u5f00\u673a\u52a0\u8f7d\u914d\u7f6e] **************************************************************************************************************************** ok: [192.168.122.73] TASK [initsys : \u8bbe\u7f6e\u7cfb\u7edf\u53c2\u6570] ********************************************************************************************************************************** ok: [192.168.122.73] TASK [initsys : \u751f\u6548\u7cfb\u7edf\u53c2\u6570] ********************************************************************************************************************************** changed: [192.168.122.73] TASK [initsys : \u521b\u5efa systemd \u914d\u7f6e\u76ee\u5f55] ************************************************************************************************************************* ok: [192.168.122.73] TASK [initsys : \u8bbe\u7f6e\u7cfb\u7edf ulimits] **************************************************************************************************************************** ok: [192.168.122.73] TASK [initsys : \u628aSCTP\u5217\u5165\u5185\u6838\u6a21\u5757\u9ed1\u540d\u5355] ************************************************************************************************************************** ok: [192.168.122.73] TASK [initmotd : Copy color.awk file to remote hosts] **************************************************************************************************** ok: [192.168.122.73] TASK [initmotd : Copy dynmotd file to remote hosts] ****************************************************************************************************** ok: [192.168.122.73] TASK [initmotd : Install package] ************************************************************************************************************************ ok: [192.168.122.73] TASK [initmotd : Modify PATH] **************************************************************************************************************************** ok: [192.168.122.73] PLAY RECAP *********************************************************************************************************************************************** 192.168.122.73 : ok=23 changed=5 unreachable=0 failed=0 skipped=8 rescued=0 ignored=0","title":"ubuntu 20.04 \u7cfb\u7edf\u521d\u59cb\u5316"},{"location":"ubuntu%2020.04%20%E7%B3%BB%E7%BB%9F%E5%88%9D%E5%A7%8B%E5%8C%96/#_1","text":"~# cat /etc/netplan/00-installer-config.yaml # This is the network config written by 'subiquity' network: ethernets: eth0: dhcp4: no addresses: - 192.168.122.73/24 gateway4: 192.168.122.1 nameservers: addresses: [223.5.5.5, 114.114.114.114] version: 2 ~# netplan apply","title":"\u7f51\u7edc\u914d\u7f6e"},{"location":"ubuntu%2020.04%20%E7%B3%BB%E7%BB%9F%E5%88%9D%E5%A7%8B%E5%8C%96/#ssh","text":"sed -i '/#PermitRootLogin/a PermitRootLogin yes' /etc/ssh/sshd_config systemctl restart sshd","title":"\u521d\u59cb\u5316ssh\u914d\u7f6e\u6587\u4ef6"},{"location":"ubuntu%2020.04%20%E7%B3%BB%E7%BB%9F%E5%88%9D%E5%A7%8B%E5%8C%96/#_2","text":"sudo ufw allow 3306/tcp sudo ufw disable","title":"\u5173\u95ed\u9632\u706b\u5899"},{"location":"ubuntu%2020.04%20%E7%B3%BB%E7%BB%9F%E5%88%9D%E5%A7%8B%E5%8C%96/#_3","text":"# 1.\u67e5\u770b\u5f53\u524d\u65f6\u533a date -R # 2.\u4fee\u6539\u4e3a\u5317\u4eac\u65f6\u533a sudo cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime # 3. \u4f7f\u7528\u4ea4\u4e92\u65b9\u5f0f\u914d\u7f6e\u4e3aBeijing\u65f6\u533a # \u4ea4\u4e92\u5f0f\u5730\u533a\u9009\u62e9\u4e9a\u6d32 Asia\uff0c\u786e\u8ba4\u4e4b\u540e\u9009\u62e9\u4e2d\u56fd\uff08China)\uff0c\u6700\u540e\u9009\u62e9\u5317\u4eac(Beijing) sudo tzselect","title":"\u8bbe\u7f6e\u65f6\u533a"},{"location":"ubuntu%2020.04%20%E7%B3%BB%E7%BB%9F%E5%88%9D%E5%A7%8B%E5%8C%96/#_4","text":"https://mirrors.ustc.edu.cn/repogen/ cat <<-\"EOF\" > /etc/apt/sources.list deb https://mirrors.ustc.edu.cn/ubuntu/ focal main restricted universe multiverse deb-src https://mirrors.ustc.edu.cn/ubuntu/ focal main restricted universe multiverse deb https://mirrors.ustc.edu.cn/ubuntu/ focal-security main restricted universe multiverse deb-src https://mirrors.ustc.edu.cn/ubuntu/ focal-security main restricted universe multiverse deb https://mirrors.ustc.edu.cn/ubuntu/ focal-updates main restricted universe multiverse deb-src https://mirrors.ustc.edu.cn/ubuntu/ focal-updates main restricted universe multiverse deb https://mirrors.ustc.edu.cn/ubuntu/ focal-backports main restricted universe multiverse deb-src https://mirrors.ustc.edu.cn/ubuntu/ focal-backports main restricted universe multiverse ## Not recommended # deb https://mirrors.ustc.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse # deb-src https://mirrors.ustc.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse EOF","title":"\u914d\u7f6e\u8f6f\u4ef6\u6e90"},{"location":"ubuntu%2020.04%20%E7%B3%BB%E7%BB%9F%E5%88%9D%E5%A7%8B%E5%8C%96/#_5","text":"\u5220\u9664\u9ed8\u8ba4\u5b89\u88c5 apt update apt remove ufw lxd lxcfs lxc-common -y \u5b89\u88c5\u57fa\u7840\u8f6f\u4ef6\u5305 apt install bash-completion conntrack ipset ipvsadm jq libseccomp2 psmisc rsync socat net-tools vim","title":"\u5b89\u88c5\u5e38\u7528\u8f6f\u4ef6\u5305"},{"location":"ubuntu%2020.04%20%E7%B3%BB%E7%BB%9F%E5%88%9D%E5%A7%8B%E5%8C%96/#ansible","text":"apt install ansible git clone https://github.com/92devops/ansible-init-os.git \u5b9a\u4e49inventory [all] 192.168.122.73 \u6267\u884c ansible-playbook -i inventory test.yml PLAY [all] *********************************************************************************************************************************************** TASK [Gathering Facts] *********************************************************************************************************************************** ok: [192.168.122.73] TASK [initsys : apt\u66f4\u65b0\u7f13\u5b58\u5237\u65b0] ******************************************************************************************************************************* ok: [192.168.122.73] TASK [initsys : \u5220\u9664ubuntu\u9ed8\u8ba4\u5b89\u88c5] **************************************************************************************************************************** changed: [192.168.122.73] => (item=ufw) changed: [192.168.122.73] => (item=lxd) changed: [192.168.122.73] => (item=lxd-client) changed: [192.168.122.73] => (item=lxcfs) changed: [192.168.122.73] => (item=lxc-common) TASK [initsys : \u5b89\u88c5 ubuntu/debian\u57fa\u7840\u8f6f\u4ef6] ******************************************************************************************************************** ok: [192.168.122.73] TASK [initsys : \u51c6\u5907 journal \u65e5\u5fd7\u76f8\u5173\u76ee\u5f55] *********************************************************************************************************************** ok: [192.168.122.73] => (item=/etc/systemd/journald.conf.d) ok: [192.168.122.73] => (item=/var/log/journal) TASK [initsys : \u4f18\u5316\u8bbe\u7f6e journal \u65e5\u5fd7] ************************************************************************************************************************* ok: [192.168.122.73] TASK [initsys : \u91cd\u542f journald \u670d\u52a1] ************************************************************************************************************************** changed: [192.168.122.73] TASK [initsys : Configuration iptables] ****************************************************************************************************************** skipping: [192.168.122.73] TASK [initsys : \u5220\u9664centos\u9ed8\u8ba4\u5b89\u88c5] **************************************************************************************************************************** skipping: [192.168.122.73] => (item=firewalld) skipping: [192.168.122.73] => (item=python-firewall) skipping: [192.168.122.73] => (item=firewalld-filesystem) TASK [initsys : \u5b89\u88c5\u57fa\u7840\u8f6f\u4ef6\u5305] ********************************************************************************************************************************* skipping: [192.168.122.73] TASK [initsys : \u4e34\u65f6\u5173\u95ed selinux] **************************************************************************************************************************** skipping: [192.168.122.73] TASK [initsys : \u6c38\u4e45\u5173\u95ed selinux] **************************************************************************************************************************** skipping: [192.168.122.73] TASK [initsys : \u7981\u6b62rsyslog\u83b7\u53d6journald\u65e5\u5fd71] ****************************************************************************************************************** skipping: [192.168.122.73] TASK [initsys : \u7981\u6b62rsyslog\u83b7\u53d6journald\u65e5\u5fd72] ****************************************************************************************************************** skipping: [192.168.122.73] TASK [initsys : \u91cd\u542frsyslog\u670d\u52a1] ***************************************************************************************************************************** skipping: [192.168.122.73] TASK [initsys : \u7981\u7528\u7cfb\u7edf swap] ******************************************************************************************************************************* changed: [192.168.122.73] TASK [initsys : \u5220\u9664fstab swap \u76f8\u5173\u914d\u7f6e] *********************************************************************************************************************** ok: [192.168.122.73] TASK [initsys : \u8f6c\u6362\u5185\u6838\u7248\u672c\u4e3a\u6d6e\u70b9\u6570] ****************************************************************************************************************************** ok: [192.168.122.73] TASK [initsys : \u52a0\u8f7d\u5185\u6838\u6a21\u5757] ********************************************************************************************************************************** ok: [192.168.122.73] => (item=br_netfilter) ok: [192.168.122.73] => (item=ip_vs) ok: [192.168.122.73] => (item=ip_vs_rr) ok: [192.168.122.73] => (item=ip_vs_wrr) ok: [192.168.122.73] => (item=ip_vs_sh) ok: [192.168.122.73] => (item=nf_conntrack) TASK [initsys : \u5c1d\u8bd5\u52a0\u8f7dnf_conntrack_ipv4] ******************************************************************************************************************* changed: [192.168.122.73] TASK [initsys : \u542f\u7528systemd\u81ea\u52a8\u52a0\u8f7d\u6a21\u5757\u670d\u52a1] *********************************************************************************************************************** ok: [192.168.122.73] TASK [initsys : \u589e\u52a0\u5185\u6838\u6a21\u5757\u5f00\u673a\u52a0\u8f7d\u914d\u7f6e] **************************************************************************************************************************** ok: [192.168.122.73] TASK [initsys : \u8bbe\u7f6e\u7cfb\u7edf\u53c2\u6570] ********************************************************************************************************************************** ok: [192.168.122.73] TASK [initsys : \u751f\u6548\u7cfb\u7edf\u53c2\u6570] ********************************************************************************************************************************** changed: [192.168.122.73] TASK [initsys : \u521b\u5efa systemd \u914d\u7f6e\u76ee\u5f55] ************************************************************************************************************************* ok: [192.168.122.73] TASK [initsys : \u8bbe\u7f6e\u7cfb\u7edf ulimits] **************************************************************************************************************************** ok: [192.168.122.73] TASK [initsys : \u628aSCTP\u5217\u5165\u5185\u6838\u6a21\u5757\u9ed1\u540d\u5355] ************************************************************************************************************************** ok: [192.168.122.73] TASK [initmotd : Copy color.awk file to remote hosts] **************************************************************************************************** ok: [192.168.122.73] TASK [initmotd : Copy dynmotd file to remote hosts] ****************************************************************************************************** ok: [192.168.122.73] TASK [initmotd : Install package] ************************************************************************************************************************ ok: [192.168.122.73] TASK [initmotd : Modify PATH] **************************************************************************************************************************** ok: [192.168.122.73] PLAY RECAP *********************************************************************************************************************************************** 192.168.122.73 : ok=23 changed=5 unreachable=0 failed=0 skipped=8 rescued=0 ignored=0","title":"\u4f7f\u7528 Ansible \u521d\u59cb\u5316\u673a\u5668"}]}